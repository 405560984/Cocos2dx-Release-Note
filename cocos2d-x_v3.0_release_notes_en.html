<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Cocos2d-x v3.0 英文发布说明 | Cocos2d-x是什么？</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-disqus/plugin.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="./cocos2d-x_v3.1_release_notes_en.html" />
    
    
    <link rel="prev" href="./cocos2d-x_release_notes_en.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="2.1"
        data-chapter-title="Cocos2d-x v3.0 英文发布说明"
        data-filepath="cocos2d-x_v3.0_release_notes_en.md"
        data-basepath="."
        data-revision="Sun May 15 2016 18:25:55 GMT+0800 (CST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="cocos2d-x_release_notes.html">
            
                
                    <a href="./cocos2d-x_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Cocos2d-x 中文发布说明
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="cocos2d-x_v3.0_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.0_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Cocos2d-x v3.0 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="cocos2d-x_v3.1_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.1_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Cocos2d-x v3.1 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="cocos2d-x_v3.2_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.2_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Cocos2d-x v3.2 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="cocos2d-x_v3.3_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.3_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Cocos2d-x v3.3 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="cocos2d-x_v3.4_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.4_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Cocos2d-x v3.4 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="cocos2d-x_v3.5_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.5_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        Cocos2d-x v3.5 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="cocos2d-x_v3.6_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.6_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Cocos2d-x v3.6 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="cocos2d-x_v3.7_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.7_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        Cocos2d-x v3.7 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="cocos2d-x_v3.8_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.8_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.9.</b>
                        
                        Cocos2d-x v3.8 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="cocos2d-x_v3.9_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.9_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.10.</b>
                        
                        Cocos2d-x v3.9 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="cocos2d-x_v3.10_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.10_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.11.</b>
                        
                        Cocos2d-x v3.10 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="cocos2d-x_v3.11_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.11_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.</b>
                        
                        Cocos2d-x v3.11 中文发布说明
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="cocos2d-x_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Cocos2d-x 英文发布说明
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.1" data-path="cocos2d-x_v3.0_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.0_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Cocos2d-x v3.0 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="cocos2d-x_v3.1_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.1_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Cocos2d-x v3.1 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="cocos2d-x_v3.2_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.2_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Cocos2d-x v3.2 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="cocos2d-x_v3.3_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.3_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Cocos2d-x v3.3 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="cocos2d-x_v3.4_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.4_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        Cocos2d-x v3.4 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="cocos2d-x_v3.5_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.5_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        Cocos2d-x v3.5 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="cocos2d-x_v3.6_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.6_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        Cocos2d-x v3.6 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="cocos2d-x_v3.7_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.7_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.8.</b>
                        
                        Cocos2d-x v3.7 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="cocos2d-x_v3.8_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.8_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.9.</b>
                        
                        Cocos2d-x v3.8 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="cocos2d-x_v3.9_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.9_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.10.</b>
                        
                        Cocos2d-x v3.9 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.11" data-path="cocos2d-x_v3.10_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.10_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.11.</b>
                        
                        Cocos2d-x v3.10 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.12" data-path="cocos2d-x_v3.11_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.11_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.12.</b>
                        
                        Cocos2d-x v3.11 英文发布说明
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Cocos2d-x是什么？</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="cocos2dx-v30-release-notes">cocos2d-x v3.0 Release Notes</h1>
<p><strong>Table of Contents</strong>  <em>generated with <a href="http://doctoc.herokuapp.com/" target="_blank">DocToc</a></em></p>
<ul>
<li><a href="#user-content-cocos2d-x-v30-release-notes">cocos2d-x v3.0 Release Notes</a></li>
<li><a href="#user-content-misc-information">Misc Information</a></li>
<li><a href="#user-content-requirements">Requirements</a><ul>
<li><a href="#user-content-runtime-requirements">Runtime Requirements</a></li>
<li><a href="#user-content-compiler-requirements">Compiler Requirements</a></li>
<li><a href="#user-content-how-to-run-tests">How to run tests</a><ul>
<li><a href="#user-content-mac-osx--ios">Mac OSX &amp; iOS</a></li>
<li><a href="#user-content-android">Android</a></li>
<li><a href="#user-content-windows">Windows</a></li>
<li><a href="#user-content-linux">Linux</a></li>
</ul>
</li>
<li><a href="#user-content-how-to-start-a-new-game">How to start a new game</a></li>
</ul>
</li>
<li><a href="#user-content-highlights-of-v30">Highlights of v3.0</a></li>
<li><a href="#user-content-features-in-detail">Features in detail</a><ul>
<li><a href="#user-content-c11-features">C++11 features</a><ul>
<li><a href="#user-content-stdfunction">std::function</a></li>
<li><a href="#user-content-strongly-typed-enums">Strongly typed enums</a></li>
<li><a href="#user-content-override">override</a></li>
</ul>
</li>
<li><a href="#user-content-removed-objective-c-patterns">Removed Objective-C patterns</a><ul>
<li><a href="#user-content-no-more-cc-prefix-for-c-classes-and-free-functions">No more &apos;CC&apos; prefix for C++ classes and free functions</a></li>
<li><a href="#user-content-clone-instead-of-copy">clone() instead of copy()</a></li>
<li><a href="#user-content-singletons-use-getinstance-and-destroyinstance">Singletons use getInstance() and destroyInstance()</a></li>
<li><a href="#user-content-object-is-replaced-with-ref">Object is replaced with Ref</a></li>
<li><a href="#user-content-getters">getters</a></li>
<li><a href="#user-content-pod-types">POD types</a></li>
</ul>
</li>
<li><a href="#user-content-new-renderer">New Renderer</a><ul>
<li><a href="#user-content-renderer-features">Renderer features</a><ul>
<li><a href="#user-content-auto-batching">Auto-batching</a></li>
<li><a href="#user-content-auto-culling">Auto-culling</a></li>
<li><a href="#user-content-global-z-order">Global Z order</a></li>
</ul>
</li>
<li><a href="#user-content-sprite-vs-spritebatchnode">Sprite vs. SpriteBatchNode</a></li>
</ul>
</li>
<li><a href="#user-content-improved-labelttf--labelbmfont--labelatlas">Improved LabelTTF / LabelBMFont / LabelAtlas</a></li>
<li><a href="#user-content-new-eventdispatcher">New EventDispatcher</a></li>
<li><a href="#user-content-physics-integration">Physics Integration</a></li>
</ul>
</li>
<li><a href="#user-content-misc-api-changes">Misc API Changes</a><ul>
<li><a href="#user-content-cctypesh">ccTypes.h</a></li>
<li><a href="#user-content-deprecated-functions-and--global-variables">deprecated functions and  global variables</a></li>
</ul>
</li>
<li><a href="#user-content-changes-in-the-lua-bindings">Changes in the Lua bindings</a><ul>
<li><a href="#user-content-use-bindings-generator-tool-for-lua-binding">Use bindings-generator tool for lua binding</a><ul>
<li><a href="#user-content-bind-the-classes-with-namespace-to-lua">Bind the classes with namespace to lua</a></li>
<li><a href="#user-content-use-scripthandlermgr-to-manage-the-register-and-unregister-of-lua-function">Use ScriptHandlerMgr to manage the register and unregister of Lua function</a></li>
</ul>
</li>
<li><a href="#user-content-misc-api-changes-1">Misc API changes</a><ul>
<li><a href="#user-content-use-ccccsccui-gl-and-sp-as-module-name">Use cc&#x3001;ccs&#x3001;ccui gl and sp as module name</a></li>
<li><a href="#user-content-modified-functions">Modified functions</a></li>
<li><a href="#user-content-add-some-modules">Add some modules</a></li>
<li><a href="#user-content-add-more-lua-bindings">Add more lua bindings</a></li>
<li><a href="#user-content-replace-some-lua-bindings-of-class-or-struct-with-lua-table">Replace some lua-bindings of Class or Struct with lua table</a></li>
<li><a href="#user-content-support-lua-script-codes-call-object-c-codes-and-java-codes">Support lua script codes call Object-C codes and Java codes</a></li>
<li><a href="#user-content-add-some-lua-files-to-store-the-constants-of-different-modules">Add some lua files to store the constants of different modules</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="misc-information">Misc Information</h1>
<ul>
<li>Download: <a href="http://cdn.cocos2d-x.org/cocos2d-x-3.0beta.zip" target="_blank">http://cdn.cocos2d-x.org/cocos2d-x-3.0beta.zip</a></li>
<li>Full Changelog: <a href="https://github.com/cocos2d/cocos2d-x/blob/cocos2d-x-3.0beta/CHANGELOG" target="_blank">https://github.com/cocos2d/cocos2d-x/blob/cocos2d-x-3.0beta/CHANGELOG</a></li>
<li>API Reference: <a href="http://www.cocos2d-x.org/reference/native-cpp/V3.0beta/index.html" target="_blank">http://www.cocos2d-x.org/reference/native-cpp/V3.0beta/index.html</a></li>
</ul>
<h1 id="requirements">Requirements</h1>
<h2 id="runtime-requirements">Runtime Requirements</h2>
<ul>
<li>Android 2.3 or newer</li>
<li>iOS 5.0 or newer</li>
<li>OS X 10.7 or newer</li>
<li>Windows 7 or newer</li>
<li><del>Windows Phone 8 or newer</del> N/A for the moment</li>
<li>Linux Ubuntu 12.04 (or newer)</li>
<li><del>Browsers via Emscripten</del> N/A for the moment</li>
</ul>
<h2 id="compiler-requirements">Compiler Requirements</h2>
<ul>
<li>Xcode 4.6 (for iOS or Mac)</li>
<li>gcc 4.7 for Linux or Android. For Android ndk-r9 or newer is required.</li>
<li>Visual Studio 2012 (for Windows)</li>
</ul>
<h2 id="how-to-run-tests">How to run tests</h2>
<h3 id="mac-osx--ios">Mac OSX &amp; iOS</h3>
<ul>
<li>Enter <code>cocos2d-x/build</code> folder, open <code>cocos2d_test.xcodeproj</code></li>
<li>Select <code>iOS</code> or <code>OS X</code> target in scheme toolbar</li>
<li>Click <code>run</code> button</li>
</ul>
<h3 id="android">Android</h3>
<p>You can run the samples...</p>
<p><strong>Using command line:</strong></p>
<pre><code>$ cd cocos2d-x
$ ./setup.py
$ cd build
$ ./android-build.py cpp-empty-test -p 10
$ adb install cocos2d-x/tests/cpp-empty-test/proj.android/bin/CppEmptyTest-debug.apk
</code></pre><p>Then click item on Android device to run tests. Available value of <code>-p</code> is the API level, cocos2d-x supports from level 10.</p>
<p><strong>Using Eclipse:</strong></p>
<pre><code>$ cd cocos2d-x
$ ./setup.py
$ cd build
$ ./android-build.py cpp-empty-test -p 10
</code></pre><p>Then</p>
<ul>
<li>Import cocos2d-x Android project into Eclipse, the path used to import is <code>cocos/2d/platform/android</code></li>
<li>Import <code>cpp-empty-test</code> Android project into Eclipse, the path used to import is <code>tests/cpp-empty-test/proj.android</code></li>
<li>Build <code>cpp-empty-test</code> Android project and run</li>
</ul>
<h3 id="windows">Windows</h3>
<ul>
<li>Enter <code>cocos2d-x/build</code>, and open <code>cocos2d-win32.vs2012.sln</code></li>
<li>Select <code>cpp-empty-test</code> as running target</li>
<li>Click run button</li>
</ul>
<h3 id="linux">Linux</h3>
<pre><code>$ cd cocos2d-x/build
$ ./install-deps-linux.sh
$ cd ../..
</code></pre><p>Then</p>
<pre><code>$ mkdir build
$ cd build
$ cmake ../cocos2d-x
$ make -j4
</code></pre><p>Run</p>
<pre><code>$ cd bin/cpp-empty-test
$ ./cpp-empty-test
</code></pre><h2 id="how-to-start-a-new-game">How to start a new game</h2>
<p>Please refer to <a href="../README.md">ReadMe</a>. And there is a <a href="https://github.com/chukong/cocos-docs/blob/master/manual/framework/native/getting-started/v3.0/how-to-start-a-new-game/en.md" target="_blank">document</a> for it.</p>
<h1 id="highlights-of-v30">Highlights of v3.0</h1>
<ul>
<li>Replaced Objective-C patterns with C++ (C++11) patterns and best practices</li>
<li>Improved Labels</li>
<li>Improved renderer (much faster than in v2.2!!)</li>
<li>New Event Dispatcher</li>
<li>Physics integration</li>
<li>New UI objects</li>
<li><a href="https://github.com/cocos2d/cocos-docs/blob/master/manual/framework/native/scripting/javascript/js-remote-debugger/en.md" target="_blank">JavaScript remote debugger</a></li>
<li>Remote Console support</li>
<li>Use <a href="https://github.com/cocos2d/cocos2d-console" target="_blank">cocos console</a> to create and run project</li>
<li>Refactor Image - release memory in time and uniform the api of supported file format</li>
<li>Automatically generated Lua bindings, add LuaJavaBridge and LuaObjcBridge</li>
<li>Templated containers<ul>
<li><code>CCDictionary</code> is replaced by <code>cocos2d::Map&lt;&gt;</code>, <a href="https://github.com/cocos2d/cocos-docs/blob/master/manual/framework/native/data-structure/v3/map/en.md" target="_blank">usage</a></li>
<li><code>CCArray</code> is replaced by <code>cocos2d::Vector&lt;&gt;</code>, <a href="https://github.com/cocos2d/cocos-docs/blob/master/manual/framework/native/data-structure/v3/vector/en.md" target="_blank">usage</a></li>
<li><code>CCBool</code>, <code>CCFLoat</code>, <code>CCDouble</code> are replaced with <code>cocos2d::Value</code>, <a href="https://github.com/cocos2d/cocos-docs/blob/master/manual/framework/native/data-structure/v3/value/en.md" target="_blank">usage</a></li>
</ul>
</li>
</ul>
<h1 id="features-in-detail">Features in detail</h1>
<h2 id="c11-features">C++11 features</h2>
<p><em>Feature added in v3.0-pre-alpha0</em></p>
<p>A subset of C++11 features are being used in cocos2d-x:</p>
<ul>
<li><code>std::function</code>, including lambda objects for callbacks</li>
<li>strongly typed enums, for most of the cocos2d-x enums and constants</li>
<li><code>std::thread</code> for threading</li>
<li><code>override</code> and <code>final</code> context keywords, for overriden and final methods</li>
</ul>
<h3 id="stdfunction">std::function</h3>
<ul>
<li><code>CallFunc</code> can be created with an <code>std::function&lt;void()&gt;</code></li>
<li><code>CallFuncN</code> can be created with an <code>std::function&lt;void(Node*)&gt;</code></li>
<li><code>CallFuncND</code> and <code>CallFuncO</code> were removed since it can be created with simulated with <code>CallFuncN</code> and <code>CallFunc</code>. See ActionsTest.cpp for more examples</li>
<li><code>MenuItem</code> supports <code>std::function&lt;void(Node*)&gt;</code> as callbacks</li>
</ul>
<p><code>CallFunc</code> example:</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// in v2.1</span>
CCCallFunc *action1 = CCCallFunc::create( <span class="hljs-keyword">this</span>, callfunc_selector( MyClass::callback_0 ) );

<span class="hljs-comment">// in v3.0 (short version)</span>
<span class="hljs-keyword">auto</span> action1 = CallFunc::create( CC_CALLBACK_0(MyClass::callback_0,<span class="hljs-keyword">this</span>));
<span class="hljs-keyword">auto</span> action2 = CallFunc::create( CC_CALLBACK_0(MyClass::callback_1,<span class="hljs-keyword">this</span>, additional_parameters));

<span class="hljs-comment">// in v3.0 (long version)</span>
<span class="hljs-keyword">auto</span> action1 = CallFunc::create( <span class="hljs-built_in">std</span>::bind( &amp;MyClass::callback_0, <span class="hljs-keyword">this</span>));
<span class="hljs-keyword">auto</span> action2 = CallFunc::create( <span class="hljs-built_in">std</span>::bind( &amp;MyClass::callback_1, <span class="hljs-keyword">this</span>, additional_parameters));

<span class="hljs-comment">// in v3.0 you can also use lambdas or any other &quot;Function&quot; object</span>
<span class="hljs-keyword">auto</span> action1 = CallFunc::create(
                 [&amp;](){
                     <span class="hljs-keyword">auto</span> s = Director::sharedDirector()-&gt;getWinSize();
                     <span class="hljs-keyword">auto</span> label = LabelTTF::create(<span class="hljs-string">&quot;called:lambda callback&quot;</span>, <span class="hljs-string">&quot;Marker Felt&quot;</span>, <span class="hljs-number">16</span>);
                     label-&gt;setPosition(ccp( s.width/<span class="hljs-number">4</span>*<span class="hljs-number">1</span>,s.height/<span class="hljs-number">2</span>-<span class="hljs-number">40</span>));
                     <span class="hljs-keyword">this</span>-&gt;addChild(label);
                 }  );
</code></pre>
<p><code>MenuItem</code> example:</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// in v2.1</span>
CCMenuItemLabel *item = CCMenuItemLabel::create(label, <span class="hljs-keyword">this</span>, menu_selector(MyClass::callback));

<span class="hljs-comment">// in v3.0 (short version)</span>
<span class="hljs-keyword">auto</span> item = MenuItemLabel::create(label, CC_CALLBACK_1(MyClass::callback, <span class="hljs-keyword">this</span>));

<span class="hljs-comment">// in v3.0 (long version)</span>
<span class="hljs-keyword">auto</span> item = MenuItemLabel::create(label, <span class="hljs-built_in">std</span>::bind(&amp;MyClass::callback, <span class="hljs-keyword">this</span>, <span class="hljs-built_in">std</span>::placeholders::_1));

<span class="hljs-comment">// in v3.0 you can use lambdas or any other &quot;Function&quot; object</span>
<span class="hljs-keyword">auto</span> item = MenuItemLabel::create(label,
                 [&amp;](Object *sender) {
                     <span class="hljs-comment">// do something. Item &quot;sender&quot; clicked</span>
                  });
</code></pre>
<h3 id="strongly-typed-enums">Strongly typed enums</h3>
<p><em>Feature added in v3.0-pre-alpha0</em></p>
<p>Constants and enums that started with <code>k</code>, and that usually were defined as <code>int</code> or as simple <code>enum</code> where replaced with strongly typed enums ( <code>enum class</code> ) to prevent collisions and type errors.
The new format is:</p>
<pre><code>| v2.1       | v3.0        |
| kTypeValue | Type::VALUE |
</code></pre><p>Examples:</p>
<pre><code>| v2.1                             | v3.0                             |
| kCCTexture2DPixelFormat_RGBA8888 | Texture2D::PixelFormat::RGBA8888 |
| kCCDirectorProjectionCustom      | Director::Projection::CUSTOM     |
| ccGREEN                          | Color3B::GREEN                   |
| CCPointZero                      | Point::ZERO                      |
| CCSizeZero                       | Size::ZERO                       |
</code></pre><p>The old values can still be used, but are deprecated.</p>
<h3 id="override">override</h3>
<p>To catch possible errors while overriding methods, subclasses with override methods have the <code>override</code> context keyword.
Example:</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">class</span> Sprite : <span class="hljs-keyword">public</span> Node {
    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isFlipY</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> <span class="hljs-keyword">const</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setFlipY</span><span class="hljs-params">(<span class="hljs-keyword">bool</span> bFlipY)</span></span>;

    <span class="hljs-comment">// Overrides</span>
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setTexture</span><span class="hljs-params">(Texture2D *texture)</span> override</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Texture2D* <span class="hljs-title">getTexture</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> override</span>;
    <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBlendFunc</span><span class="hljs-params">(<span class="hljs-keyword">const</span> BlendFunc &amp;blendFunc)</span> override</span>;
    <span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">const</span> BlendFunc&amp; <span class="hljs-title">getBlendFunc</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span> override</span>;
}
</code></pre>
<h2 id="removed-objectivec-patterns">Removed Objective-C patterns</h2>
<p><em>Feature added in v3.0-pre-alpha0</em></p>
<h3 id="no-more-cc-prefix-for-c-classes-and-free-functions">No more &apos;CC&apos; prefix for C++ classes and free functions</h3>
<p><em>Changes in classes</em></p>
<p>Since cocos2d-x already uses the <code>cocos2d</code> namespace, there is not need to add the prefix <code>CC</code> to all its classes.</p>
<p>Examples:</p>
<pre><code>| v2.1       | v3.0     |
| CCSprite   | Sprite   |
| CCNode     | Node     |
| CCDirector | Director |
| etc...                |
</code></pre><p>v2.1 class names are still available, but they were tagged as deprecated.</p>
<p><em>Changes in free functions</em></p>
<p>For the <em>drawing primitives</em>:</p>
<ul>
<li>They were added in the <code>DrawPrimitives</code> namespace</li>
<li>The <code>cc</code> prefix was removed</li>
</ul>
<p>For the <em>gl proxy functions</em>:</p>
<ul>
<li>They were added in the <code>GL</code> namespace</li>
<li>The <code>ccGL</code> prefix was removed</li>
</ul>
<p>Examples:</p>
<pre><code>| v2.1                | v3.0                         |
| ccDrawPoint()       | DrawPrimitives::drawPoint()  |
| ccDrawCircle()      | DrawPrimitives::drawCircle() |
| ccGLBlendFunc()     | GL::blendFunc()              |
| ccGLBindTexture2D() | GL::bindTexture2D()          |
| etc...                                                 |
</code></pre><p>v2.1 free functions are still available, but they were tagged as deprecated.</p>
<h3 id="clone-instead-of-copy">clone() instead of copy()</h3>
<p><code>clone()</code> returns an autoreleased version of the copy.</p>
<p><code>copy()</code> is no longer supported. If you use it, it will compile, but the code will crash.</p>
<p>Example:</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// v2.1</span>
CCMoveBy *action = (CCMoveBy*) move-&gt;copy();
action-&gt;autorelease();

<span class="hljs-comment">// v3.0</span>
<span class="hljs-comment">// No need to do autorelease, no need to do casting.</span>
<span class="hljs-keyword">auto</span> action = move-&gt;clone();
</code></pre>
<h3 id="singletons-use-getinstance-and-destroyinstance">Singletons use getInstance() and destroyInstance()</h3>
<p>All singletons use <code>getInstance()</code> and <code>destroyInstance()</code> (if applicable) to get and destroy the instance.</p>
<p>Examples:</p>
<pre><code>| v2.1                          | v3.0                        |
| CCDirector-&gt;sharedDirector()  | Director-&gt;getInstance()     |
| CCDirector-&gt;endDirector()     | Director-&gt;destroyInstance() |
| etc...                                                      |
</code></pre><p>v2.1 methods are still available, but they were tagged as deprecated.</p>
<h3 id="object-is-replaced-with-ref">Object is replaced with Ref</h3>
<p>Because the name <code>Object</code> is confused, so rename it to <code>Ref</code>, and remove functions that are not related with reference count. All classes that inherit from <code>Object</code> now inherit from <code>Ref</code>.</p>
<h3 id="getters">getters</h3>
<p>Getters now use the <code>get</code> prefix.</p>
<p>Examples:</p>
<pre><code>| v2.1                            | v3.0*                                 |
| node-&gt;boundingBox()             | node-&gt;getBoundingBox()                |
| sprite-&gt;nodeToParentTransform() | sprite-&gt;getNodeToParentTransform() |
| etc...                                                               |
</code></pre><p>And getters were also tagged as <code>const</code> in their declaration. Example:</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// v2.1</span>
<span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">float</span> <span class="hljs-title">getScale</span><span class="hljs-params">()</span></span>;

<span class="hljs-comment">// v3.0</span>
<span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">float</span> <span class="hljs-title">getScale</span><span class="hljs-params">()</span> <span class="hljs-keyword">const</span></span>;
</code></pre>
<p>v2.1 methods are still available, but they were tagged as deprecated.</p>
<h3 id="pod-types">POD types</h3>
<p>Methods that were receiving POD types as arguments (eg: <code>TexParams</code>, <code>Point</code>, <code>Size</code>, etc.) are being passed as <code>const</code> reference.</p>
<p>Example:</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// v2.1</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setTexParameters</span><span class="hljs-params">(ccTexParams* texParams)</span></span>;

<span class="hljs-comment">// v3.0</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setTexParameters</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ccTexParams&amp; texParams)</span></span>;
</code></pre>
<h2 id="new-renderer">New Renderer</h2>
<p><em>Feature added in v3.0-beta and improved in v3.0-beta2</em></p>
<p>The way currently cocos2d-x v2.2 does rendering is OK but it is difficult to optimize, difficult to add new functionality and difficult to port to new platforms.
So cocos2d-x v3.0 has a new renderer that is more performing, elegant, scalable, flexible but still simple to use and to understand. Also existing cocos2d-x users will find the new API familiar and they will feel immediately comfortable with, without having to bother about what&#x2019;s changed or what&apos;s new under the hood.</p>
<p>Features of the new renderer:</p>
<ul>
<li>It has been decoupled from the Scene Graph. The <code>draw()</code> method, instead of &quot;drawing&quot; it sends a <code>RenderCommand</code> to the <code>Renderer</code>, and <code>Renderer</code> is responsible for drawing the queued <code>RenderCommand</code> commands.</li>
<li><code>QuadCommands</code> (used by <code>Sprite</code> and <code>ParticleSystem</code> objects) will be automatically batched.</li>
<li><code>CustomCommand</code> objects allow the user to use custom OpenGL code, using a API similar to v2.2</li>
<li><code>GroupCommand</code> objects allow to have &quot;stacks&quot; in the Renderer with different OpenGL values.</li>
<li>Auto-culling for <code>Sprite</code> objects (although, technically, Auto-culling is not performed in <code>Renderer</code> code, but in the <code>Sprite</code> code)</li>
<li>Global Z ordering (local Z ordering is still supported)</li>
</ul>
<p>For detailed information, please read the following doc: <a href="https://docs.google.com/document/d/17zjC55vbP_PYTftTZEuvqXuMb9PbYNxRFu0EGTULPK8/edit" target="_blank">Renderer Specification document</a></p>
<h3 id="renderer-features">Renderer features</h3>
<h4 id="autobatching">Auto-batching</h4>
<p>Auto-batching means that the <code>Renderer</code> will package &quot;multiple draw calls&quot; in just one &quot;big draw call&quot; (AKA batch). In order to group &quot;draw calls&quot; certain conditions are needed:</p>
<ul>
<li>It only works with <code>QuadCommand</code> commands (used by Sprite and ParticleSystem objects)</li>
<li>The <code>QuadCommands</code> must share the same Material ID: same Texture ID, same GLProgram and same blending function</li>
<li>The <code>QuadCommands</code> must consecutive </li>
</ul>
<p>If those conditions are met, the <code>Renderer</code> will create create a batch (one draw call) with all those <code>QuadCommand</code> objects.</p>
<p>In case you are unfamiliar with the OpenGL best practices, batching is very important to have decent speed in your games. The less batches (draw calls) the more performance your game is going to be.</p>
<h4 id="autoculling">Auto-culling</h4>
<p>For the moment auto-culling is only implemented on <code>Sprite</code> objects.</p>
<p>When the method <code>Sprite::draw()</code> is called, it will check if the <code>Sprite</code> is outside the screen. If so, it won&apos;t send the <code>QuadCommand</code> command to the <code>Renderer</code>, and thus, it will gain some performance.</p>
<h4 id="global-z-order">Global Z order</h4>
<p>A new method called <code>setGlobalZOrder()</code> / <code>getGlobalZOrder()</code> was added to <code>Node</code>, and the old methods <code>setZOrder()</code> / <code>getZOrder()</code> were renamed to <code>setLocalZOrder()</code> / <code>getLocalZOrder()</code>.</p>
<p><code>globalZOrder</code> receives a <code>float</code> (and not an <code>int</code>) as argument. And this value is used to sort the <code>RenderCommand</code> objects in the <code>Renderer</code>. Lower values have higher priority over higher values. That means that a Node with a <code>globalZOrder</code> of <code>-10</code> is going to be drawn BEFORE a Node with <code>globalZOrder</code> of <code>10</code>.</p>
<p>Nodes that have a <code>globalZOrder</code> of <code>0</code> (default value) will be drawn according to the Scene Graph order.</p>
<p>If the <code>globalZOrder</code> is not changed, cocos2d-x v3.0 will behave exactly as cocos2d-x v2.2.</p>
<p><strong><code>globalZOrder()</code> vs. <code>localZOrder()</code></strong>:</p>
<ul>
<li><code>globalZOrder</code> is used to sort the &quot;draw commands&quot; in the <code>Renderer</code></li>
<li><code>localZOrder</code> is used to sort the <code>Node</code> objects in its parent&apos;s children Array</li>
</ul>
<p><strong>Exceptions</strong>:</p>
<p>TODO</p>
<h3 id="sprite-vs-spritebatchnode">Sprite vs. SpriteBatchNode</h3>
<p>In v2.2 the recommended way to have good performance was to parent <code>Sprite</code> objects to a <code>SpriteBatchNode</code> object.
Although the performance was (is still) very good by using <code>SpriteBatchNode</code> objects, they had (still have) some limitations like:</p>
<ul>
<li><code>Sprite</code> objects can only have <code>Sprite</code> objects as children (if not, cocos2d-x will raise an Assert)<ul>
<li>You cannot add a <code>ParticleSystem</code> as a child of <code>Sprite</code>, when the <code>Sprite</code> is parented to a <code>SpriteBatchNode</code></li>
<li>As a consequence of that, you cannot use <code>ParallaxNode</code> with <code>Sprites</code> parented to <code>SpriteBatchNode</code></li>
</ul>
</li>
<li>All <code>Sprite</code> objects must share the same TextureId (if not, cocos2d-x will raise an Assert)</li>
<li><code>Sprite</code> objects use the <code>SpriteBatchNode</code>&apos;s blending function and shader.</li>
</ul>
<p>And although v3.0 still supports <code>SpriteBatchNode</code> (with the same features and limitations), we no longer encourage its usage. Instead, we recommend to use <code>Sprite</code> objects without parenting them to a <code>SpriteBatchNode</code>.</p>
<p>But in order to have a very good performance in v3.0, you have to make sure that your <code>Sprite</code> objects:</p>
<ul>
<li>Share the same TextureId (place them in a spritesheet, like if you were using a <code>SpriteBatchNode</code>)</li>
<li>Make sure all of them use the same shader and blending function (like if you were using a <code>SpriteBatchNode</code>)</li>
</ul>
<p>If you do so, the <code>Sprites</code> will perform almost as fast as to using <code>SpriteBatchNode</code>... (about 10% slower on old devices. On newer devices the difference is almost imperceptible)</p>
<p>The big differences between v2.2 and v3.0 are:</p>
<ul>
<li><code>Sprite</code> objects can have different Texture IDs. </li>
<li><code>Sprite</code> objects can have any kind of <code>Node</code> as children, including <code>ParticleSystem</code>. </li>
<li><code>Sprite</code> objects can have different blending functions and use different shaders. </li>
</ul>
<p>But if you do that, the <code>Renderer</code> might not be able to batch all its children (less performant). But the game will keep running, without raising any Assert.</p>
<p><strong>To summarize</strong>:</p>
<ul>
<li>Keep putting all your sprites in a big spritesheet</li>
<li>Use the same Blending Function (just use the default one)</li>
<li>Use the same Shader (just use the default one)</li>
<li>And don&apos;t parent your sprites to a <code>SpriteBatchNode</code></li>
</ul>
<p>Only use <code>SpriteBatchNode</code> as the last resort, when you really need an extra (although minor) boost in performance (and you are OK with its limitations).</p>
<h2 id="improved-labelttf--labelbmfont--labelatlas">Improved LabelTTF / LabelBMFont / LabelAtlas</h2>
<p><em>Feature added in v3.0-alpha0</em></p>
<p><code>LabelTTF</code>, <code>LabelBMFont</code> and <code>LabelAtlas</code> will be replaced by new <code>Label</code>. The benefits of new <code>Label</code> are:</p>
<ul>
<li>uniform api to create <code>LabelTTF</code>, <code>LabelBMFont</code> and <code>LabelAtlas</code></li>
<li>use <code>freetype</code> to generate texture for labels, which make sure that labels have the same effect on different platforms</li>
<li>will cache textures to improve performance</li>
</ul>
<h2 id="new-eventdispatcher">New EventDispatcher</h2>
<p><em>Feature added in v3.0-alpha0</em></p>
<p>All events such as touch event, keyboard event, acceleration event and custom event are dispatched by <code>EventDispatcher</code>.
<code>TouchDispatcher</code>, <code>KeypadDispatcher</code>, <code>KeyboardDispatcher</code>, <code>AccelerometerDispatcher</code> were removed.</p>
<p>Features of <code>EventDispatcher</code> are:</p>
<ul>
<li>dispatch events based on rendering sequence</li>
<li>all events are dispatched by <code>EventDispatcher</code></li>
<li>can use <code>EventDispatcher</code> to dispatch custom events</li>
<li>can register a lambda as call back function</li>
</ul>
<p>Detail information of <code>EventDispatcher</code> can refer to <a href="https://github.com/cocos2d/cocos-docs/blob/master/manual/framework/native/input/event-dispatcher/en.md" target="_blank">this document</a>.</p>
<h2 id="physics-integration">Physics Integration</h2>
<p><em>Feature added in v3.0-pre-alpha0</em></p>
<p>In v3.0, we integrate physics engine into cocos2d-x based on <a href="https://chipmunk-physics.net/" target="_blank">Chipmunk2D</a>. By using this feature, you can create physics based games without understanding physics engine.</p>
<p>More detail information of this feature, please refer to <a href="https://github.com/cocos2d/cocos-docs/blob/master/manual/framework/native/physics/physics-integration/en.md" target="_blank">this document</a></p>
<h1 id="misc-api-changes">Misc API Changes</h1>
<h2 id="cctypesh"><code>ccTypes.h</code></h2>
<p>Remove <em>cc</em> prefix for structure names in ccTypes.h, move global functions into static member functions, and move global constants into const static member variables.</p>
<pre><code>| v2.1 struct names       | v3.0 struct names |
| ccColor3B               | Color3B |
| ccColor4B               | Color4B |
| ccColor4F               | Color4F |
| ccVertex2F               | Vertex2F |
| ccVertex3F               | Vertex3F |
| ccTex2F                   | Tex2F |
| ccPointSprite           | PointSprite |
| ccQuad2                   | Quad2 |
| ccQuad3                   | Quad3 |
| ccV2F_C4B_T2F           | V2F_C4B_T2F |
| ccV2F_C4F_T2F           | V2F_C4F_T2F |
| ccV3F_C4B_T2F           | V3F_C4B_T2F |
| ccV2F_C4B_T2F_Triangle  | V2F_C4B_T2F_Triangle |
| ccV2F_C4B_T2F_Quad      | V2F_C4B_T2F_Quad |
| ccV3F_C4B_T2F_Quad      | V3F_C4B_T2F_Quad |
| ccV2F_C4F_T2F_Quad      | V2F_C4F_T2F_Quad |
| ccBlendFunc               | BlendFunc |
| ccT2F_Quad               | T2F_Quad |
| ccAnimationFrameData    | AnimationFrameData |
</code></pre><p>Global functions changed example</p>
<pre><code class="lang-c++"><span class="hljs-comment">// in v2.1</span>
ccColor3B color3B = ccc3(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
ccc3BEqual(color3B, ccc3(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
ccColor4B color4B = ccc4(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
ccColor4F color4F = ccc4f(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
color4F = ccc4FFromccc3B(color3B);
color4F = ccc4FFromccc4B(color4B);
ccc4FEqual(color4F, ccc4F(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
color4B = ccc4BFromccc4F(color4F);

color3B = ccWHITE;

<span class="hljs-comment">// in v3.0</span>
Color3B color3B = Color3B(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
color3B.equals(Color3B(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
Color4B color4B = Color4B(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
Color4F color4F = Color4F(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
color4F = Color4F(color3B);
color4F = Color4F(color4B);
color4F.equals(Color4F(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>));
color4B = Color4B(color4F);

color3B = Color3B::WHITE;
</code></pre>
<h2 id="deprecated-functions-and--global-variables">deprecated functions and  global variables</h2>
<pre><code>| v2.1 names     | v3.0 names |
| ccp             | Point |
| ccpNeg         | Point::- |
| ccpAdd         | Point::+ |
| ccpSub         | Point::- |
| ccpMult         | Point::* |
| ccpMidpoint     | Point::getMidpoint |
| ccpDot         | Point::dot |
| ccpCrosss     | Point::cross |
| ccpPerp         | Point::getPerp |
| ccpRPerp         | Point::getRPerp |
| ccpProject     | Point::project |
| ccpRotate     | Point::rotate |
| ccpUnrotate     | Point::unrotate |
| ccpLengthSQ     | Point::getLengthSq() |
| ccpDistanceSQ | Point::getDistanceSq |
| ccpLength     | Point::getLength |
| ccpDistance     | Point::getDistance |
| ccpNormalize     | Point::normalize |
| ccpForAngle     | Point::forAngle |
| ccpToAngle     | Point::getAngle |
| ccpClamp         | Point::getClampPoint |
| ccpFromSize     | Point::Point |
| ccpCompOp        | Point::compOp |
| ccpLerp         | Point::lerp |
| ccpFuzzyEqual | Point::fuzzyEqual |
| ccpCompMult     | Point::Point |
| ccpAngleSigned | Point::getAngle |
| ccpAngle         | Point::getAngle |
| ccpRotateByAngle | Point::rotateByAngle |
| ccpLineInersect | Point::isLineIntersect |
| ccpSegmentIntersect | Point::isSegmentIntersect |
| ccpIntersectPoint | Point::getIntersectPoint |
| CCPointMake    | Point::Point |
| CCSizeMake    | Size::Size |
| CCRectMake     | Rect::Rect |
| PointZero     | Point::ZERO |
| SizeZero         | Size::ZERO |
| RectZero         | Rect::ZERO |
| TiledGrid3DAction::tile | TiledGrid3DAction::getTile |
| TiledGrid3DAction::originalTile | TiledGrid3DAction::getOriginalTile |
| TiledGrid3D::tile | TiledGrid3D::getTile |
| TiledGrid3D::originalTile | TiledGrid3D::getOriginalTile |
| Grid3DAction::vertex | Grid3DAction::getVertex |
| Grid3DAction::originalVertex | Grid3DAction::getOriginalVertex |
| Grid3D::vertex | Grid3D::getVertex |
| Grid3D::originalVertex | Grid3D::getOriginalVertex |
| Configuration::sharedConfiguration | Configuration::getInstance |
| Configuration::purgeConfiguration | Configuration::destroyInstance() |
| Director::sharedDirector() | Director::getInstance() |
| FileUtils::sharedFileUtils | FileUtils::getInstance |
| FileUtils::purgeFileUtils | FileUtils::destroyInstance |
| GLView::sharedOpenGLView | GLView::getInstance |
| ShaderCache::sharedShaderCache | ShaderCache::getInstance |
| ShaderCache::purgeSharedShaderCache | ShaderCache::destroyInstance |
| AnimationCache::sharedAnimationCache | AnimationCache::getInstance |
| AnimationCache::purgeSharedAnimationCache | AnimationCache::destroyInstance |
| SpriteFrameCache::sharedSpriteFrameCache | SpriteFrameCache::getInstance |
| SpriteFrameCache:: purgeSharedSpriteFrameCache | SpriteFrameCache::destroyInstance |
| NotificationCenter::sharedNotificationCenter | NotificationCenter::getInstance |
| NotificationCenter:: purgeNotificationCenter | NotificationCenter::destroyInstance |
| Profiler::sharedProfiler | Profiler::getInstance |
| UserDefault::sharedUserDefault | UserDefault::getInstance |
| UserDefault::purgeSharedUserDefault | UserDefault::destroyInstance |
| Application::sharedApplication | Application::getInstance |
| ccc3()         | Color3B() |
| ccc3BEqual()     | Color3B::equals() |
| ccc4()         | Color4B() |
| ccc4FFromccc3B() | Color4F() |
| ccc4f()         | Color4F() |
| ccc4FFromccc4B() | Color4F() |
| ccc4BFromccc4F() | Color4B() |
| ccc4FEqual()     | Color4F::equals() |
| ccWHITE         | Color3B::WHITE |
| ccYELLOW         | Color3B::YELLOW |
| ccBLUE         | Color3B::BLUE |
| ccGREEN         | Color3B::GREEN |
| ccRED         | Color3B::RED |
| ccMAGENTA     | Color3B::MAGENTA |
| ccBLACK         | Color3B::BLACK |
| ccORANGE         | Color3B::ORANGE |
| ccGRAY         | Color3B::GRAY |
| kBlendFuncDisable | BlendFunc::BLEND_FUNC_DISABLE |
</code></pre><h1 id="changes-in-the-lua-bindings">Changes in the Lua bindings</h1>
<h2 id="use-bindingsgenerator-tool-for-lua-binding">Use bindings-generator tool for lua binding</h2>
<p>Only have to write an ini file for a module, don&apos;t have to write a lot of .pkg files</p>
<h3 id="bind-the-classes-with-namespace-to-lua">Bind the classes with namespace to lua</h3>
<p>In previous, the lua binding can not bind classes that have the same class name but different namespaces. In order to resolve this issue, now the metatable name of a class is changed. For example, <code>CCNode</code> will be changed to <code>cc.Node</code>. This modification will affect some APIs as follows:</p>
<pre><code>|           v2.x                   |                  v3.0             |
| tolua_usertype(tolua_S,&quot;CCNode&quot;) | tolua_usertype(tolua_S,&quot;cc.Node&quot;) |
| tolua_isusertable(tolua_S,1,&quot;CCNode&quot;,0,&amp;tolua_err         | tolua_isusertable(tolua_S,1,&quot;cc.Node&quot;,0,&amp;tolua_err  |
| tolua_isusertype(tolua_S,1,&quot;CCNode&quot;,0,&amp;tolua_err)         | tolua_isusertype(tolua_S,1,&quot;cc.Node&quot;,0,&amp;tolua_err)  |
| toluafix_pushusertype_ccobject(tolua_S, nID, pLuaID, (void*)tolua_ret,&quot;CCNode&quot;)         | toluafix_pushusertype_ccobject(tolua_S, nID, pLuaID, (void*)tolua_ret,&quot;cc.Node&quot;)  |
| tolua_pushusertype(tolua_S,(void*)tolua_ret,&quot;CCFileUtils&quot;)         | tolua_pushusertype(tolua_S,(void*)tolua_ret,&quot;cc.FileUtils&quot;)  |
| tolua.cast(pChildren[i + 1], &quot;CCNode&quot;)             | tolua.cast(pChildren[i + 1], &quot;cc.Node&quot;) |
</code></pre><h3 id="use-scripthandlermgr-to-manage-the-register-and-unregister-of-lua-function">Use ScriptHandlerMgr to manage the register and unregister of Lua function</h3>
<p>When we want to add register and unregister functions of Lua function for class, we need to change the declarative and defined files and then bind to Lua.
In v3.0, we use the <code>ScriptHandlerMgr</code>. As an example, lets see the <code>MenuItem</code> class:
In the 2.x version, we needed to add a declaration in the MenuItem header file:</p>
<pre><code class="lang-c++"> <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">registerScriptTapHandler</span><span class="hljs-params">(<span class="hljs-keyword">int</span> nHandler)</span></span>;
 <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">unregisterScriptTapHandler</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;
</code></pre>
<p>then implement them in the .cpp file. In the Lua script ,we use it as follow:</p>
<pre><code class="lang-lua">menuItem:registerScriptTapHandler(luafunction)
</code></pre>
<p>In v3.0 version, we only need to add the <code>HandlerType</code> enum in the <code>ScriptHandlerMgr</code>, and the implementation in luascript as follow:</p>
<pre><code class="lang-lua">ScriptHandlerMgr:getInstance():registerScriptHandler(menuItem, luafunction,cc.HANDLERTYPE_MENU_CLICKED)
</code></pre>
<h2 id="misc-api-changes">Misc API changes</h2>
<h3 id="use-cc&#x3001;ccs&#x3001;ccui-gl-and-sp-as-module-name">Use <code>cc</code>&#x3001;<code>ccs</code>&#x3001;<code>ccui</code> <code>gl</code> and <code>sp</code> as module name</h3>
<p>Now classes are bound into different modules instead of using global module. This will avoid conflicts with other codes.</p>
<ul>
<li>classes in <code>cocos2d</code>&#x3001;<code>cocos2d::extension</code>&#x3001;<code>CocosDenshion</code> and <code>cocosbuilder</code>  were bound to <code>cc</code> module</li>
<li>classes in <code>cocos2d::ui</code> were bound to <code>ccui</code> module</li>
<li>classes in <code>spine</code> were bound to <code>sp</code> module</li>
<li>classes in <code>cocostudio</code> were bound to <code>ccs</code> module</li>
<li>global variables are bound to corresponding modules</li>
<li>all funcionts and constants about <code>openGl</code> were bound to <code>gl</code> module</li>
</ul>
<p>Examples:</p>
<pre><code>| v2.1                    | v3.0                    |
| CCDirector              | cc.Director             |
| CCArmature              | ccs.Armature            |
| kCCTextAlignmentLeft    | cc.kCCTextAlignmentLeft |
</code></pre><h3 id="modified-functions">Modified functions</h3>
<p>Some global function names are renamed:</p>
<p>Examples:</p>
<pre><code>| v2.1                    | v3.0                    |
| CCPoint/ccp             | cc.p                    |
| CCRect                  | cc.rect                 |
| CCColor3B               | cc.c3b                  |
| CCColor4B               | cc.c4b                  |
| CCColor4F               | cc.c4f                  |
</code></pre><h3 id="add-some-modules">Add some modules</h3>
<p>In the version 3.0, more modules were bound to lua, specific as follows:</p>
<ul>
<li>physics</li>
<li>spine</li>
<li>XMLHttpRequest</li>
<li>OpenGL</li>
</ul>
<p>The <code>XMLHttpRequest</code> and <code>physics</code> are in the <code>cc</code> module, the <code>spine</code> is in the <code>sp</code> module, and the <code>OpenGL</code> is in the <code>gl</code> module. Related test cases located in:</p>
<ul>
<li>physics   ---&gt; TestLua/PhysicsTest</li>
<li>spine     ---&gt; TestLua/SpineTest</li>
<li>XMLHttpRequest ---&gt; TestLua/XMLHttpRequestTest</li>
<li>openGL    ---&gt; TestLua/OpenGLTest</li>
</ul>
<h3 id="add-more-lua-bindings">Add more lua bindings</h3>
<p>Such as: New Label&#x3001;New EventDispatcher and AssetsManager,etc.Related test cases located in:</p>
<ul>
<li>New Label ---&gt; TestLua/LabelTestNew</li>
<li>New EventDispatcher ---&gt;TestLua/NewEventDispatcherTest</li>
<li>AssetsManager  ---&gt; TestLua/AssetsManagerTest</li>
</ul>
<h3 id="replace-some-luabindings-of-class-or-struct-with-lua-table">Replace some lua-bindings of Class or Struct with lua table</h3>
<p>In the version 3.0, all the lua-binding of Struct type were replaced with the lua table</p>
<p>Examples:</p>
<pre><code>| v2.1                    | v3.0                    |
| CCPoint                 | lua table               |
| CCRect                  | lua table               |
| CCColor3B               | lua table               |
| CCColor4B               | lua table               |
| CCColor4F               | lua table               |
| CCAffineTransform       | lua table               |
| CCArray                 | lua table               |    
| CCDictionary            | lua table               |
| CCPointArray            | lua table               |
</code></pre><h3 id="support-lua-script-codes-call-objectc-codes-and-java-codes">Support lua script codes call Object-C codes and Java codes</h3>
<p><code>LuaObjcBridge</code> and <code>LuaJavaBridge</code> bound to lua supported lua script codes calls Object-C codes and java codes.</p>
<h3 id="add-some-lua-files-to-store-the-constants-of-different-modules">Add some lua files to store the constants of different modules</h3>
<ul>
<li>Cocos2DConstants.lua store the constants of <code>cc</code> module</li>
<li>StudioConstants.lua store the constants of  <code>ccs</code> module</li>
<li>GuiConstants.lua store the constants of <code>ccui</code> module</li>
<li>OpenglConstants.lua store the constants of <code>gl</code> module</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./cocos2d-x_release_notes_en.html" class="navigation navigation-prev " aria-label="Previous page: Cocos2d-x 英文发布说明"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./cocos2d-x_v3.1_release_notes_en.html" class="navigation navigation-next " aria-label="Next page: Cocos2d-x v3.1 英文发布说明"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-disqus/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"disqus":{"shortName":"Cocos2d-x","useIdentifier":false},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"livereload":{}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>

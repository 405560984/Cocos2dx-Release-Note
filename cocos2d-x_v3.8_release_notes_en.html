<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Cocos2d-x v3.8 英文发布说明 | Cocos2d-x是什么？</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-disqus/plugin.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="./cocos2d-x_v3.9_release_notes_en.html" />
    
    
    <link rel="prev" href="./cocos2d-x_v3.7_release_notes_en.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="2.9"
        data-chapter-title="Cocos2d-x v3.8 英文发布说明"
        data-filepath="cocos2d-x_v3.8_release_notes_en.md"
        data-basepath="."
        data-revision="Sun May 15 2016 15:17:08 GMT+0800 (CST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="cocos2d-x_release_notes.html">
            
                
                    <a href="./cocos2d-x_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Cocos2d-x 中文发布说明
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="cocos2d-x_v3.0_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.0_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Cocos2d-x v3.0 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="cocos2d-x_v3.1_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.1_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Cocos2d-x v3.1 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="cocos2d-x_v3.2_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.2_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Cocos2d-x v3.2 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="cocos2d-x_v3.3_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.3_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Cocos2d-x v3.3 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="cocos2d-x_v3.4_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.4_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Cocos2d-x v3.4 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="cocos2d-x_v3.5_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.5_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        Cocos2d-x v3.5 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="cocos2d-x_v3.6_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.6_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Cocos2d-x v3.6 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="cocos2d-x_v3.7_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.7_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        Cocos2d-x v3.7 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="cocos2d-x_v3.8_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.8_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.9.</b>
                        
                        Cocos2d-x v3.8 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="cocos2d-x_v3.9_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.9_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.10.</b>
                        
                        Cocos2d-x v3.9 中文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="cocos2d-x_v3.10_release_notes.html">
            
                
                    <a href="./cocos2d-x_v3.10_release_notes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.11.</b>
                        
                        Cocos2d-x v3.10 中文发布说明
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="cocos2d-x_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Cocos2d-x 英文发布说明
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="cocos2d-x_v3.0_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.0_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Cocos2d-x v3.0 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="cocos2d-x_v3.1_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.1_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Cocos2d-x v3.1 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="cocos2d-x_v3.2_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.2_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Cocos2d-x v3.2 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="cocos2d-x_v3.3_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.3_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Cocos2d-x v3.3 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="cocos2d-x_v3.4_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.4_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        Cocos2d-x v3.4 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="cocos2d-x_v3.5_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.5_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        Cocos2d-x v3.5 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="cocos2d-x_v3.6_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.6_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        Cocos2d-x v3.6 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="cocos2d-x_v3.7_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.7_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.8.</b>
                        
                        Cocos2d-x v3.7 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="2.9" data-path="cocos2d-x_v3.8_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.8_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.9.</b>
                        
                        Cocos2d-x v3.8 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="cocos2d-x_v3.9_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.9_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.10.</b>
                        
                        Cocos2d-x v3.9 英文发布说明
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.11" data-path="cocos2d-x_v3.10_release_notes_en.html">
            
                
                    <a href="./cocos2d-x_v3.10_release_notes_en.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.11.</b>
                        
                        Cocos2d-x v3.10 英文发布说明
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Cocos2d-x是什么？</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="cocos2dx-v38-release-notes">Cocos2d-x v3.8 Release Notes</h1>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<p><strong>Table of Contents</strong>  <em>generated with <a href="https://github.com/thlorenz/doctoc" target="_blank">DocToc</a></em></p>
<ul>
<li><a href="#misc-information">Misc Information</a></li>
<li><a href="#requirements">Requirements</a><ul>
<li><a href="#runtime-requirements">Runtime Requirements</a></li>
<li><a href="#compiler-requirements">Compiler Requirements</a></li>
<li><a href="#how-to-run-tests">How to run tests</a><ul>
<li><a href="#cocos-console">Cocos Console</a></li>
<li><a href="#mac-osx-&amp;-ios">Mac OSX &amp; iOS</a></li>
<li><a href="#android">Android</a></li>
<li><a href="#windows">Windows</a></li>
<li><a href="#linux">Linux</a></li>
</ul>
</li>
<li><a href="#how-to-start-a-new-game">How to start a new game</a></li>
</ul>
</li>
<li><a href="#v38">v3.8</a><ul>
<li><a href="#highlights-and-api-changes-of-v38">Highlights and API changes of v3.8</a></li>
<li><a href="#download">Download</a></li>
<li><a href="#the-main-features-in-detail">The main features in detail:</a><ul>
<li><a href="#3d-module">3D Module</a></li>
<li><a href="#ui-system">UI System</a></li>
<li><a href="#audioengine">AudioEngine</a></li>
<li><a href="#fileutils">FileUtils</a></li>
<li><a href="#others">Others</a></li>
</ul>
</li>
<li><a href="#other-changes">Other changes</a></li>
<li><a href="#new-apis">New APIs</a></li>
</ul>
</li>
<li><a href="#the-next-step">The Next Step</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h1 id="misc-information">Misc Information</h1>
<ul>
<li><a href="https://github.com/cocos2d/cocos2d-x/blob/v3/CHANGELOG" target="_blank">Full Changelog</a></li>
</ul>
<h1 id="requirements">Requirements</h1>
<h2 id="runtime-requirements">Runtime Requirements</h2>
<ul>
<li>Android 2.3 or newer</li>
<li>iOS 5.0 or newer</li>
<li>OS X 10.7 or newer</li>
<li>Windows 7 or newer</li>
<li>Windows Phone 8.1</li>
<li>Windows 10 UWP</li>
<li>Linux Ubuntu 14.04 or newer</li>
<li>Mordern browsers and IE 9+ (On mobile platforms, only iOS and Android 5 activated WebGL support)</li>
</ul>
<h2 id="compiler-requirements">Compiler Requirements</h2>
<ul>
<li>Xcode 5.1 or newer for iOS or Mac</li>
<li>gcc 4.9 or newer for Linux</li>
<li>ndk-r10c for Android</li>
<li>Visual Studio 2013 or newer for Windows (win32)</li>
<li>Visual Studio 2013 update4 or newer for Windows 8.1 universal Apps</li>
<li>Visual Studio 2015 RC or newer and Windows 10.0 (build 10074 or higher) for Windows 10.0 UWP Apps</li>
</ul>
<h2 id="how-to-run-tests">How to run tests</h2>
<h3 id="cocos-console">Cocos Console</h3>
<p>You can use <a href="www.cocos2d-x.org/wiki/Cocos2d-console">Cocos Console</a> command line tool to run the test cases on almost all supported platforms.</p>
<p>In console application:</p>
<pre><code>// Enter cpp test folder
cd tests/cpp-tests
// Or enter js test folder
cd tests/js-tests
// Or enter lua test folder
cd tests/lua-tests

// Compile or run test case
cocos compile -p ios|mac|android|win32|win8_1|metro|web -m debug|release
cocos run -p ios|mac|android|win32|win8_1|metro|web -m debug|release
</code></pre><p>For example, if you want to run cpp test in release mode on Android, you can use the following command:</p>
<pre><code>cocos run -p android -m release
</code></pre><h3 id="mac-osx--ios">Mac OSX &amp; iOS</h3>
<ul>
<li>Enter <code>cocos2d-x/build</code> folder, open <code>cocos2d_test.xcodeproj</code></li>
<li>Select <code>cpp-tests</code>, <code>lua-tests</code>, <code>js-tests</code> for <code>iOS</code> or <code>OS X</code> target in scheme toolbar</li>
<li>Click <code>run</code> button</li>
</ul>
<h3 id="android">Android</h3>
<p>You can run the samples...</p>
<p><strong>Using command line:</strong></p>
<pre><code>$ cd cocos2d-x
$ ./setup.py
$ cd build
$ ./android-build.py cpp-empty-test -p 10
$ adb install cocos2d-x/tests/cpp-empty-test/proj.android/bin/CppEmptyTest-debug.apk
</code></pre><p>Then click item on Android device to run tests. Available value of <code>-p</code> is the API level, cocos2d-x supports from level 10.</p>
<p><strong>Using Eclipse:</strong></p>
<pre><code>$ cd cocos2d-x
$ ./setup.py
$ cd build
$ ./android-build.py cpp-empty-test -p 10
</code></pre><p>Then</p>
<ul>
<li>Import cocos2d-x Android project into Eclipse, the path used to import is <code>cocos/2d/platform/android</code></li>
<li>Import <code>cpp-empty-test</code> Android project into Eclipse, the path used to import is <code>tests/cpp-empty-test/proj.android</code></li>
<li>Build <code>cpp-empty-test</code> Android project and run</li>
</ul>
<h3 id="windows">Windows</h3>
<ul>
<li>For win32 project, enter <code>cocos2d-x/build</code>, and open <code>cocos2d-win32.sln</code></li>
<li>For win 8.1 project, enter <code>cocos2d-x/build</code>, and open <code>cocos2d-win8.1-universal.sln</code></li>
<li>For win 10 project, enter <code>cocos2d-x/build</code>, and open <code>cocos2d-win10.sln</code></li>
<li>Select running target</li>
<li>Click run button</li>
</ul>
<h3 id="linux">Linux</h3>
<pre><code>$ cd cocos2d-x/build
$ ./install-deps-linux.sh
$ cd ../..
</code></pre><p>Then</p>
<pre><code>$ mkdir build
$ cd build
$ cmake ../cocos2d-x
$ make -j4
</code></pre><p>Run</p>
<pre><code>$ cd bin/cpp-empty-test
$ ./cpp-empty-test
</code></pre><h2 id="how-to-start-a-new-game">How to start a new game</h2>
<p>Use Cocos Console to create a new game:</p>
<pre><code>cocos new -l cpp|js|lua MyNewGame
</code></pre><h1 id="v38">v3.8</h1>
<h2 id="highlights-and-api-changes-of-v38">Highlights and API changes of v3.8</h2>
<p>As promised, Cocos2d-x v3.8 have greatly improved the stability and API friendliness. On one side, we continue to improve 3D capacity by providing 3D physics collider, skybox background brush and key frame event callback in Animate3D. On another side, we have refined several core modules, including UI system, AudioEngine, FileUtils, Bindings Generator, etc.</p>
<p>Here is some highlighted improvments and API changes:</p>
<ol>
<li>3D Module<ul>
<li>Added 3D physics collider</li>
<li>Supported setting camera background brushes with color/depth/skybox </li>
<li>Added key frame event Callback in Animate3D</li>
<li>Added light map support in Terrain</li>
</ul>
</li>
<li>UI System<ul>
<li>Reimplemented and enhanced EditBox on Android</li>
<li>Added ScrollViewBar for displaying a scroll bar at the side of ScrollView (JSB/Lua ready)</li>
<li>Added RadioButton widget (JSB/Lua ready)</li>
<li>Added HANYI FullType font support</li>
</ul>
</li>
<li>AudioEngine<ul>
<li>AudioEngine supported audio preloading</li>
<li>Bound new AudioEngine in JSB</li>
</ul>
</li>
<li>FileUtils<ul>
<li>Added a set of file writing APIs: writeStringToFile, writeDataToFile, writeValueMapToFile, writeValueVectorToFile</li>
</ul>
</li>
<li>Others<ul>
<li>Improved Bindings Generator tool</li>
<li>Merged JSB test project into cocos2d test project</li>
<li>framework: Support generate prebuilt libs of engine with debug mode</li>
<li>console: Supported new portrait projects from templates</li>
</ul>
</li>
</ol>
<h2 id="download">Download</h2>
<p><a href="http://www.cocos2d-x.org/filedown/cocos2d-x-3.8.zip" target="_blank">Cocos2d-x v3.8</a> including : C++, Lua &amp; JS</p>
<h2 id="the-main-features-in-detail">The main features in detail:</h2>
<h3 id="3d-module">3D Module</h3>
<ol>
<li><p>3D physics collider</p>
<p> 3D physics collider is a new type of physics object. It can be used as both trigger and collider. </p>
<p> Trigger is a region defined by physics shapes and  can get callback when other physics objects enter or leave. Its usage is described in the following code:</p>
<pre><code class="lang-cpp"> <span class="hljs-comment">//create a collider using colliderDes</span>
 Physics3DColliderDes colliderDes;
 colliderDes.shape = Physics3DShape::createSphere(<span class="hljs-number">10.0f</span>);
 colliderDes.isTrigger = <span class="hljs-literal">true</span>;
 <span class="hljs-keyword">auto</span> collider = Physics3DCollider::create(&amp;colliderDes);
 <span class="hljs-keyword">auto</span> component = Physics3DComponent::create(collider);
 <span class="hljs-keyword">auto</span> node = Node::create();
 addChild(node);
 node-&gt;addComponent(component);

 collider-&gt;onTriggerEnter = [=](Physics3DObject *otherObject){
   <span class="hljs-comment">//some body entering</span>
 };
 collider-&gt;onTriggerExit = [=](Physics3DObject *otherObject){
   <span class="hljs-comment">//some one leaving</span>
 };
</code></pre>
<p> Collider is similar to rigid body, it can give force to the rigid body that collides with it. However, it is static and has better performance than rigid body. It is proper to represent a static scene or objects using collider and dynamic part using rigid body. You can set colliderDes.isTrigger to false when you want to make it collider.</p>
</li>
<li><p>Camera background brushes</p>
<p> Different with previous versions, in v3.8, developers can choose to erase the camera&#x2019;s background with 4 types of brush: none, color, depth, skybox. None brush means do nothing; Color brush erases background using given color and depth; depth brush erases background using given depth; skybox brush erases background using given skybox with 6 texture faces. The default brush is depth brush. The usage of brushes is showing below:</p>
<pre><code class="lang-cpp"> <span class="hljs-comment">// Using none brush</span>
 _camera-&gt;setBackgroundBrush(CameraBackgroundBrush::createNoneBrush());
 <span class="hljs-comment">// Using depth brush, clear depth with 1.0</span>
 _camera-&gt;setBackgroundBrush(CameraBackgroundBrush::createDepthBrush(<span class="hljs-number">1.f</span>));
 <span class="hljs-comment">// Using color brush, clear color is (1,0,0,1), depth is 1</span>
 _camera-&gt;setBackgroundBrush(CameraBackgroundBrush::createColorBrush(Color4F(<span class="hljs-number">1.f</span>, <span class="hljs-number">0.f</span>, <span class="hljs-number">0.f</span>, <span class="hljs-number">1.f</span>), <span class="hljs-number">1.f</span>));
 <span class="hljs-comment">// SkyBox brush</span>
 _camera-&gt;setBackgroundBrush(CameraBackgroundBrush::createSkyboxBrush(<span class="hljs-string">&quot;Sprite3DTest/skybox/left.jpg&quot;</span>, <span class="hljs-string">&quot;Sprite3DTest/skybox/right.jpg&quot;</span>,<span class="hljs-string">&quot;Sprite3DTest/skybox/top.jpg&quot;</span>, <span class="hljs-string">&quot;Sprite3DTest/skybox/bottom.jpg&quot;</span>,<span class="hljs-string">&quot;Sprite3DTest/skybox/front.jpg&quot;</span>, <span class="hljs-string">&quot;Sprite3DTest/skybox/back.jpg&quot;</span>));
</code></pre>
</li>
<li><p>Animate3D key frame event callback</p>
<p> Similar to 2d AnimationFrame callback, frame event callback is supported in Animated3D now. It allows developer to set a callback to be invoked when specific frame is played. Sample code:</p>
<pre><code class="lang-cpp"> <span class="hljs-keyword">auto</span> animation = Animation3D::create(&#x201C;XX.c3b&#x201D;);
 <span class="hljs-keyword">auto</span> animate = Animate3D::create(animation);
 ValueMap valuemap0;<span class="hljs-comment">//you can add some user data here, it can be used in the frame event callback</span>
 <span class="hljs-comment">//add a callback when frame 275 is played</span>
 animate-&gt;setKeyFrameUserInfo(<span class="hljs-number">275</span>, valuemap0);

 <span class="hljs-keyword">auto</span> listener = EventListenerCustom::create(Animate3DDisplayedNotification, [&amp;](EventCustom* event)
 {
     <span class="hljs-keyword">auto</span> info = (Animate3D::Animate3DDisplayedEventInfo*)event-&gt;getUserData();

     <span class="hljs-comment">//frame 275 is played, you can add some code here</span>
     cocos2d::<span class="hljs-built_in">log</span>(&#x201C;frame %d&#x201D;, info-&gt;frame);
 });
 Director::getInstance()-&gt;getEventDispatcher()-&gt;addEventListenerWithFixedPriority(listener, -<span class="hljs-number">1</span>);
</code></pre>
</li>
<li><p>Light map support in Terrain</p>
<p> Terrain with light map is supported in v3.8, which means you can add a light map texture baked from other tools to the terrain. The light map texture contains light info, so that the terrain seems to be lighted with several lights. Terrain with light map can be created like this,</p>
<pre><code class="lang-cpp"> //create a normal terrain as before
 Terrain::DetailMap r(&#x201C;TerrainTest/dirt.jpg&#x201D;),g(&#x201C;TerrainTest/Grass2.jpg&#x201D;),b(&#x201C;TerrainTest/road.jpg&#x201D;),a(&#x201C;TerrainTest/GreenSkin.jpg&#x201D;);
 Terrain::TerrainData data(&#x201C;TerrainTest/heightmap16.jpg&#x201D;,&#x201D;TerrainTest/alphamap.png&#x201D;,r,g,b,a);
 _terrain = Terrain::create(data,Terrain::CrackFixedType::SKIRT);
 _terrain-&gt;setLODDistance(3.2f,6.4f,9.6f);
 _terrain-&gt;setMaxDetailMapAmount(4);
 _terrain-&gt;setDrawWire(false);
 //set light map for the terrain
 _terrain-&gt;setLightMap(&#x201C;TerrainTest/Lightmap.png&#x201D;);
</code></pre>
</li>
</ol>
<h3 id="ui-system">UI System</h3>
<ol>
<li><p>Reimplemented EditBox</p>
<p> The usage of EditBox is the same as before, but we have reimplemented it for Android platform. The use experience is highly improved, important improvements are: </p>
<ul>
<li>Display cursor in EditBox</li>
<li>Support copy, cut, paste and select actions in EditBox</li>
<li>Support multi-line input, you should set InputMode to <code>ANY</code> to enable multi-line input</li>
<li>EditBox won&apos;t be masked by the keyboard UI anymore</li>
</ul>
</li>
<li><p>ScrollViewBar</p>
<p> In the previous versions, the ScrollView doesn&apos;t have any visual notification for the current location in view. In v3.8, we have added a scroll bar attached to the ScrollView. You could tweak the the opacity, color, width and the duration for auto hiding the scroll bar. Speical thanks to @neokim.</p>
<p> Usage:</p>
<pre><code class="lang-cpp"> ui::ScrollView* scrollView = ui::ScrollView::create();
 scrollView-&gt;setScrollBarWidth(<span class="hljs-number">4</span>);
 scrollView-&gt;setScrollBarPositionFromCorner(Vec2(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>));
 scrollView-&gt;setScrollBarColor(Color3B::WHITE);
 <span class="hljs-keyword">this</span>-&gt;addChild(scrollView);
</code></pre>
</li>
<li><p>RadioButton widget</p>
<p> RadioButton is a specific type of two-states button that is similar to CheckBox.</p>
<p> Additionally, it can be used together with RadioButtonGroup to interact with other radio buttons.</p>
<p> There is only one RadioButton in checked state at the same time within a RadioButtonGroup. Special thanks to @neokim who have contributed the implementation of this new widget.</p>
<p> Usage: </p>
<pre><code class="lang-cpp"> <span class="hljs-comment">//create a RadioButtonGroup</span>
 <span class="hljs-keyword">auto</span> radioButtonGroup = RadioButtonGroup::create();
 <span class="hljs-keyword">this</span>-&gt;addChild(radioButtonGroup);

 <span class="hljs-comment">//create a RadioButton</span>
 RadioButton* radioButton1 = RadioButton::create(<span class="hljs-string">&quot;radio_button_off.png&quot;</span>, <span class="hljs-string">&quot;radio_button_on.png&quot;</span>);
 radioButton1-&gt;setPosition(Vec2(<span class="hljs-number">100</span>,<span class="hljs-number">100</span>);
 <span class="hljs-keyword">this</span>-&gt;addChild(radioButton1);

 <span class="hljs-comment">//create another RadioButton</span>
 RadioButton* radioButton2 = RadioButton::create(<span class="hljs-string">&quot;radio_button_off.png&quot;</span>, <span class="hljs-string">&quot;radio_button_on.png&quot;</span>);
 radioButton2-&gt;setPosition(Vec2(<span class="hljs-number">100</span>,<span class="hljs-number">100</span>);
 <span class="hljs-keyword">this</span>-&gt;addChild(radioButton2);

 <span class="hljs-comment">//add the RadioButtons into RadioButtonGroup</span>
 radioButtonGroup-&gt;addRadioButton(radioButton1);
 radioButtonGroup-&gt;addRadioButton(radioButton2);
</code></pre>
</li>
</ol>
<h3 id="audioengine">AudioEngine</h3>
<ol>
<li><p>Audio preloading</p>
<p> AudioEngine now supports preload audio files before playing it. For some large audio file, this feature can smooth the audio playing experience in user&apos;s games. Sample code: </p>
<pre><code class="lang-cpp"> <span class="hljs-comment">//Use it with callback</span>
 AudioEngine::preload(<span class="hljs-string">&quot;audio1.mp3&quot;</span>,[](<span class="hljs-keyword">bool</span> isSuccess){
     <span class="hljs-comment">//...</span>
 });
 <span class="hljs-comment">//Use it without callback</span>
 AudioEngine::preload(<span class="hljs-string">&quot;audio2.mp3&quot;</span>);
</code></pre>
</li>
<li><p>JSB new AudioEngine</p>
<p> In JSB, the default audio engine was SimpleAudioEngine (renamed to cc.audioEngine). It was the old audio engine provided since v2, and it have some inconvenience like delay time, no event support, etc. So we decided to provide new AudioEngine in JSB, the API remains the same as C++ API, and its usage can be found in <a href="https://github.com/cocos2d/cocos2d-x/blob/v3/tests/js-tests/src/NativeTest/AudioEngineTest.js" target="_blank">its test case</a>.</p>
</li>
</ol>
<h3 id="fileutils">FileUtils</h3>
<ol>
<li><p>New file writing APIs</p>
<p> In v3.8, we have provided a bunch of file writing APIs in FileUtils. Now you can use very simple APIs to write string, binary data, value map, and value vector into a file in user&apos;s file system. Each API is demonstrated in the following sample code:</p>
<pre><code class="lang-cpp"> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> writablePath = FileUtils::getInstance()-&gt;getWritablePath();

 <span class="hljs-comment">// FileUtils::writeStringToFile</span>
 <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> writeDataStr = <span class="hljs-string">&quot;the string data will be write into a file&quot;</span>;
 <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> fullPath = writablePath + <span class="hljs-string">&quot;writeStringTest.txt&quot;</span>;
 FileUtils::getInstance()-&gt;writeStringToFile(writeDataStr, fullPath.c_str());

 <span class="hljs-comment">// FileUtils::writeDataToFile</span>
 <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> writeDataStr = <span class="hljs-string">&quot;the binary data will be write into a file&quot;</span>;
 Data writeData;
 writeData.copy((<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> *)writeDataStr.c_str(), writeDataStr.size());
 <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> fullPath = writablePath + <span class="hljs-string">&quot;writeDataTest.txt&quot;</span>;
 FileUtils::getInstance()-&gt;writeDataToFile(writeData, fullPath.c_str()));

 <span class="hljs-comment">// FileUtils::writeValueMapToFile</span>
 <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> fullPath = writablePath + <span class="hljs-string">&quot;testWriteValueMap.plist&quot;</span>;
 FileUtils::getInstance()-&gt;writeValueMapToFile(valueMap, fullPath.c_str());

 <span class="hljs-comment">// FileUtils::writeValueVectorToFile</span>
 <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> fullPath = writablePath + <span class="hljs-string">&quot;testWriteValueVector.plist&quot;</span>;
 FileUtils::getInstance()-&gt;writeValueVectorToFile(valueVector, fullPath.c_str());
</code></pre>
<p> Besides, you can retrieve the extension (in lower case) of a file with <code>FileUtils::getFileExtension</code> API.</p>
</li>
</ol>
<h3 id="others">Others</h3>
<ol>
<li><p>Bindings Generator</p>
<p> In v3.8, we also improved our bindings generator tool, now it&apos;s even more powerful and be able to bind almost all kind of C++ APIs to script. Here is a detailed list about improvement in bindings generator.</p>
<ul>
<li>Supported generating auto bindings code for public member variables</li>
<li>Avoid memory leak of non-Ref classes instance by controlling C++ object memory with JS object</li>
<li>Made JSB classes automatically extendable if configured in classes_need_extend list</li>
<li>Improved support for Lambda functions in JS auto bindings</li>
</ul>
</li>
<li><p>JSB test project</p>
<p> In v3.8, JSB test project have been merged into C++ test project. That means cocos2d_js_tests.xcodeproj, cocos2d-js-win32.sln, cocos2d-js-win8.1-universal.sln have been removed. You can find jsb test targets in cocos2d_test.xcodeproj, cocos2d-win32.sln and cocos2d-win8.1-universal.sln.</p>
</li>
<li><p>Compile custom framework in debug mode</p>
<p> From v3.7, you was able to generate customized Cocos Framework from cocos2d-x. We have improved this ability in v3.8, now  you will be able to generate framework in debug mode. Here is the some documentation about it:</p>
<ul>
<li><a href="http://www.cocos2d-x.org/wiki/Cocos_gen-libs" target="_blank">Framework compile documentation</a>.</li>
<li><a href="http://www.cocos2d-x.org/docs/manual/studio/v4/chapter3/HowToCode/CustomizeFramework-v3.8/en" target="_blank">How to customize Cocos Framework</a></li>
<li><a href="http://www.cocos2d-x.org/wiki/Cocos_gen-simulator" target="_blank">How to generate Cocos Simulator</a></li>
</ul>
</li>
<li><p>Portrait projects support</p>
<p> From v3.8, you can generate portrait oriented games with Cocos Console:</p>
<pre><code> cocos new -l cpp|lua|js --portrait MyPortraitGame
</code></pre><p> More details can be found in <a href="http://www.cocos2d-x.org/wiki/Cocos_new" target="_blank">Cocos new command</a> and <a href="http://www.cocos2d-x.org/wiki/Cocos2d-console" target="_blank">Cocos Console general documentation</a></p>
</li>
</ol>
<h2 id="other-changes">Other changes</h2>
<ul>
<li>[NEW]           UI: Enhanced ScrollView with easing out scrolling</li>
<li>[NEW]           UI: Added PageView vertical scroll support</li>
<li>[NEW]           UI: Added PageView::JumpToPage API</li>
<li>[NEW]           UI: Added a setter for line width in DrawNode</li>
<li>[NEW]           Action: Permitted setting bitwise flags to action</li>
<li>[NEW]           Animate: Added Animate&apos;s getCurrentFrameIndex function</li>
<li>[NEW]           FileUtils: Added FileUtils::getFileExtension for getting file&apos;s extension name</li>
<li>[NEW]           Device: Added vibrate support to enable vibration for a duration</li>
<li>[NEW]           UserDefault: Supported removing key pairs from UserDefault</li>
<li>[NEW]           spine: Supported Spine runtime 2.3 (Both native and web engine)</li>
<li>[NEW]           console: Moved the framework-compile tools into cocos2d-console</li>
<li><p>[NEW]           network: Upgrade SocketIO support to v1.x</p>
</li>
<li><p>[REFINE]        3D: Supported composite 2D/3D scene by moving UI and camera far away</p>
</li>
<li>[REFINE]        3D: Improved Particle3D performance</li>
<li>[REFINE]        Label: Supported adding child nodes in Label</li>
<li>[REFINE]        UI: Improved Slider&apos;s precision</li>
<li>[REFINE]        UI: Refined scroll event dispatching for ScrollView</li>
<li>[REFINE]        UI: Improved event handling in TextField</li>
<li>[REFINE]        Label: Supported auto batch with bitmap font or char map</li>
<li>[REFINE]        studio: Added BlendFrame support to Skeleton Animation</li>
<li>[REFINE]        studio: Enabled blendfunc cascade to the skin of BoneNode</li>
<li>[REFINE]        utils: Made utils::captureScreen saving file in another thread to improve the performance</li>
<li>[REFINE]        3rd party: Update Nibiru SDK to 2.6</li>
<li>[REFINE]        JS: Supported new construction for 3d classes in JS</li>
<li>[REFINE]        JS: Refine performance for Cocos Studio JSON parser for 2.x</li>
<li>[REFINE]        web: Avoid re-bake the content when the parent node&apos;s position get changed</li>
<li>[REFINE]        web: Solved repeat loading same resource issue when parsing cocos studio project</li>
<li>[REFINE]        web: Optimized resources automatic loading in JSON parser</li>
<li>[REFINE]        web: Avoid cc.loader resource loading being terminated while encounter errors</li>
<li>[REFINE]        web: Suspended the video player when the browser is minimized</li>
</ul>
<p>You can also take a look at <a href="https://github.com/cocos2d/cocos2d-x/blob/v3/CHANGELOG" target="_blank">the full changelog</a></p>
<h2 id="new-apis">New APIs</h2>
<p>In the above changes, there are some new APIs introduced in v3.8, they are listed here:</p>
<ol>
<li><p>PageView vertical scroll support</p>
<pre><code> PageView* pageView = PageView::create();
 pageView-&gt;setContentSize(Size(240.0f, 130.0f));
 pageView-&gt;setDirection(ui::PageView::Direction::VERTICAL);
</code></pre></li>
<li><p>Setter for line width in DrawNode</p>
<pre><code> DrawNode* drawNode = DrawNode::create();
 drawNode-&gt;setLineWidth(5.0f);
</code></pre></li>
<li><p>Bitwise flags of action</p>
<pre><code> enum Flags {
     FRAME = 1,
     COLOR = 2,
     OPACITY = 4,
     POSITION = 8,
     SCALE = 16,
     ROTATION = 32,
     SKEW = 64
 };

 auto action = RepeatForever::create(Sequence::create(FadeTo::create( 0.1f, 155), TintTo::create(0.1f, 255,0,0), nullptr));
 // Since opacity and color will be modified in this action, it can be flagged as opacity and color action
 action-&gt;setFlags(Flags::OPACITY|Flags::COLOR);

 auto action2 = RepeatForever::create(Sequence::create(MoveBy::create(0.3f, Vec2(5, 0)), nullptr));
 // Since position will be modified in this action, it can be flagged as position action
 action-&gt;setFlags(Flags::POSITION);
</code></pre></li>
<li><p>Get current frame index in animation</p>
<pre><code> auto action = RepeatForever::create( Animate::create(animation);
 sprite-&gt;runAction(action);
 sprite-&gt;scheduleOnce([=](float){
     int index = action-&gt;getCurrentFrameIndex();
     // ...
 }, 1.0f, &quot;get-current-frame&quot;);
</code></pre></li>
<li><p>File&apos;s extension name getter</p>
<pre><code> std::string extension = FileUtils::getInstance()-&gt;getFileExtension(&quot;grossini.png&quot;);
</code></pre></li>
<li><p>Vibration support</p>
<pre><code> // Virate the device for 0.5 second
 Device::vibrate(0.5f);
</code></pre></li>
<li><p>Remove key pairs from UserDefault</p>
<pre><code> // Remove value referenced by &quot;some key&quot;
 UserDefault::getInstance()-&gt;deleteValueForKey(&quot;some key&quot;);
</code></pre></li>
</ol>
<h1 id="the-next-step">The Next Step</h1>
<p>In v3.9, we will continue to improve our framework, several important tasks are: </p>
<ol>
<li>We are about to provide a script based component system.</li>
<li>Improve ScrollView, ListView performance in both native and web engine.</li>
<li>Improve 2D particle system performance.</li>
<li>Improve web engine renderer logic and performance.</li>
<li>Support Action inheritance in JSB.</li>
<li>Remove libcurl dependency on iOS and Android.</li>
</ol>
<p><a href="https://github.com/cocos2d/cocos2d-x/milestones/v3.9" target="_blank">The v3.9 milestone tasks</a> (It&apos;s still being reviewing and will be updated)</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./cocos2d-x_v3.7_release_notes_en.html" class="navigation navigation-prev " aria-label="Previous page: Cocos2d-x v3.7 英文发布说明"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./cocos2d-x_v3.9_release_notes_en.html" class="navigation navigation-next " aria-label="Next page: Cocos2d-x v3.9 英文发布说明"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-disqus/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-livereload/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"disqus":{"shortName":"Cocos2d-x","useIdentifier":false},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"livereload":{}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
